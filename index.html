<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Society Resident Portal</title>
    <!-- Load Tailwind CSS for utility classes -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Load Lucide icons for a modern look -->
    <script src="https://unpkg.com/lucide@latest"></script>
     <!-- jquery liberary  -->
    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <style>
        /* Custom styles for Inter font and general body look */
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f7fafc; /* Light gray background */
        }
        /* Style for active tab button */
        .tab-button.active {
            border-bottom: 3px solid #9210b9; /* Emerald 500 */
            color: #9210b9;
            font-weight: 600;
        }
        /* Style the main container shadow and border */
        .app-container {
            min-height: 85vh;
        }
    </style>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'primary': '#9210b9', // Emerald 500
                        'secondary': '#9210b9', // Orange 500
                    },
                }
            }
        }
    </script>
</head>
<body class="p-4 md:p-8 flex items-center justify-center">

    <div id="app" class="w-full max-w-4xl bg-white shadow-2xl rounded-xl app-container overflow-hidden">
        
        <!-- Header -->
        <header class="p-6 bg-primary text-white rounded-t-xl">
            <h1 class="text-3xl font-bold tracking-tight">Dream City Residential Portal</h1>
            <p class="text-sm opacity-90 mt-1">Your one-stop app for society management.</p>
        </header>

        <!-- Tab Navigation -->
        <nav class="flex border-b border-gray-200 sticky top-0 bg-white z-10">
            <button class="tab-button flex-1 py-4 text-center text-gray-600 transition duration-150 ease-in-out hover:bg-gray-50 focus:outline-none" 
                    data-tab="payment" onclick="showTab('payment')">
                <i data-lucide="scan" class="inline-block w-5 h-5 mr-2 -mt-1"></i>
                Maintenance Payment
            </button>
            <button class="tab-button flex-1 py-4 text-center text-gray-600 transition duration-150 ease-in-out hover:bg-gray-50 focus:outline-none" 
                    data-tab="suggestion" onclick="showTab('suggestion')">
                <i data-lucide="send" class="inline-block w-5 h-5 mr-2 -mt-1"></i>
                Suggestion Box
            </button>
            <button class="tab-button flex-1 py-4 text-center text-gray-600 transition duration-150 ease-in-out hover:bg-gray-50 focus:outline-none" 
                    data-tab="map" onclick="showTab('map')">
                <i data-lucide="map" class="inline-block w-5 h-5 mr-2 -mt-1"></i>
                Society Map
            </button>
        </nav>

        <!-- Tab Content -->
        <main class="p-6 md:p-10">

            <!-- 1. Payment Tab (QR Scanner Simulation) -->
            <section id="payment" class="tab-content">
                <h2 class="text-2xl font-semibold text-gray-800 mb-6 border-b pb-2">Maintenance Fee Payment</h2>

                <div class="flex flex-col items-center p-8 bg-gray-50 rounded-lg border border-gray-200">
                    <div class="w-48 h-48 bg-gray-200 rounded-lg flex items-center justify-center mb-6 shadow-inner border border-gray-300">
                        <img src="QR Code.jpeg" alt='QR Code'>
                       
                    </div>
                    
                    <p class="text-center text-gray-600 mb-6">
                        Scan the above QR code for maintenance fee payment.
                    </p>
                </div>
            </section>

            <!-- 2. Suggestion Box Tab (WhatsApp Integration) -->
            <section id="suggestion" class="tab-content hidden">
                <h2 class="text-2xl font-semibold text-gray-800 mb-6 border-b pb-2">Submit a Suggestion</h2>

               <!-- Email Configuration -->
    <script>
        // !!! IMPORTANT: Configure the Recipient Email Here !!!
        const ADMIN_EMAIL = "abc@gmail.com"; 
        const EMAIL_SUBJECT = "Dream City Improvement Suggestion";
    </script>

    <!-- Main Submission Card -->
    <div class="w-full max-w-xl bg-white shadow-2xl rounded-xl p-6 md:p-10 border border-gray-100">
        <h1 class="text-3xl font-extrabold text-gray-800 mb-2">Community Suggestion Box (Email Client Required)</h1>
        <p class="text-gray-500 mb-6">
            Your submission will open in your default email application. You must manually click **Send** in that application.
        </p>

        <!-- Notification Area for success/error messages -->
        <div id="notification-area" class="mb-6 hidden"></div>

        <!-- The Submission Form -->
        <form id="suggestionForm">
            
            <!-- House No. Column -->
            <div class="mb-4">
                <label for="house_no" class="block text-sm font-medium text-gray-700 mb-2">
                    House No. (e.g., 101-B)
                </label>
                <input
                    type="text"
                    id="house_no"
                    name="houseNo" 
                    required
                    class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 transition duration-150 shadow-sm"
                    placeholder="Enter your house or unit number"
                >
            </div>

            <!-- Suggestion Area Column -->
            <div class="mb-6">
                <label for="suggestion_area" class="block text-sm font-medium text-gray-700 mb-2">
                    Your Suggestion/Feedback
                </label>
                <textarea
                    id="suggestion_area"
                    name="suggestionText" 
                    rows="6"
                    required
                    class="w-full px-4 py-3 border border-gray-300 rounded-lg resize-none focus:outline-none focus:ring-2 focus:ring-indigo-500 transition duration-150 shadow-sm"
                    placeholder="Describe your suggestion here (required)"
                ></textarea>
            </div>

            <!-- Submit Button -->
            <div>
                <button
                    type="submit"
                    id="submitButton"
                    class="w-full flex justify-center items-center py-3 px-4 border border-transparent rounded-lg shadow-lg text-lg font-semibold text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 transition duration-200 transform hover:scale-[1.01]"
                >
                    Prepare Email
                </button>
            </div>
        </form>
    </div>
            </section>

            <!-- 3. Society Map Tab (PDF Embed) -->
            <section id="map" class="tab-content hidden">
                <h2 class="text-2xl font-semibold text-gray-800 mb-6 border-b pb-2">Society Layout Map (PDF)</h2>
                
                <div class="bg-gray-100 p-2 rounded-lg shadow-inner">
               <a href='DREAM CITY.pdf'> Click here to Download Society Map</a>
                </div>
            </section>

        </main>
    </div>

    <script>
        // Placeholder phone number for the Society Admin/Group
        // NOTE: Use international format (Country Code + Number, no spaces or dashes)
        const SOCIETY_WA_NUMBER = "91xxxxxxxxxx"; 

        /**
         * Switches the active content tab and updates the button styling.
         * @param {string} tabId The ID of the tab content to show (e.g., 'payment').
         */
        function showTab(tabId) {
            // Hide all tab content
            document.querySelectorAll('.tab-content').forEach(content => {
                content.classList.add('hidden');
            });

            // Deactivate all tab buttons
            document.querySelectorAll('.tab-button').forEach(button => {
                button.classList.remove('active');
            });

            // Show the selected tab content
            document.getElementById(tabId).classList.remove('hidden');

            // Activate the selected tab button
            document.querySelector(`.tab-button[data-tab="${tabId}"]`).classList.add('active');
        }
         /**
         * Generates the WhatsApp link with the suggestion text and opens it.
         * @param {Event} event The form submission event.
         */
        function sendWhatsAppSuggestion(event) {
            event.preventDefault(); // Stop default form submission
            
            const suggestionTextarea = document.getElementById('suggestion-text');
            const suggestion = suggestionTextarea.value.trim();
            const statusBox = document.getElementById('suggestion-status');
            
            if (suggestion.length === 0) {
                // Show a brief message if the textarea is empty
                statusBox.innerHTML = '<p class="font-medium text-red-700">‚ùå Error: Please enter a suggestion.</p>';
                statusBox.classList.remove('hidden', 'bg-blue-100', 'border-blue-500', 'text-blue-700');
                statusBox.classList.add('bg-red-100', 'border-red-500', 'text-red-700');
                return;
            }
            
            // Template message for the WhatsApp link
            const template = `Suggestion from Resident:\n****\n${suggestion}\n****`;
            
            // Encode the message for use in a URL
            const encodedMessage = encodeURIComponent(template);
            
            // Construct the WhatsApp API URL
            const whatsappUrl = `https://wa.me/${SOCIETY_WA_NUMBER}?text=${encodedMessage}`;
            
            // Open the link in a new tab
            window.open(whatsappUrl, '_blank');
            
            // Display success message and clear the form
            statusBox.innerHTML = '<p class="font-medium">üëç Opening WhatsApp!</p><p class="text-sm mt-1">Please confirm and send the pre-filled message in the opened WhatsApp window.</p>';
            statusBox.classList.remove('hidden', 'bg-red-100', 'border-red-500', 'text-red-700');
            statusBox.classList.add('bg-blue-100', 'border-blue-500', 'text-blue-700');
            
            // Reset the form after successful action
            suggestionTextarea.value = '';
        }

        // Initialize Lucide icons on window load and set the default tab
        window.onload = function() {
            lucide.createIcons();
            showTab('payment'); // Start on the Payment tab
        }


           document.addEventListener('DOMContentLoaded', () => {
            const form = document.getElementById('suggestionForm');
            const notificationArea = document.getElementById('notification-area');

            // Helper function to encode text for a URL
            const urlEncode = (str) => encodeURIComponent(str).replace(/%20/g, '+');

            // Helper function to show a message
            function showMessage(type, title, text) {
                notificationArea.innerHTML = '';
                notificationArea.classList.remove('hidden');
                
                let bgColor = type === 'success' ? 'bg-green-100' : 'bg-red-100';
                let borderColor = type === 'success' ? 'border-green-400' : 'border-red-400';
                let textColor = type === 'success' ? 'text-green-700' : 'text-red-700';

                notificationArea.className = `px-4 py-3 rounded-md mb-6 ${bgColor} border ${borderColor}`;

                const message = document.createElement('div');
                message.innerHTML = `<h3 class="font-bold mb-1 ${textColor}">${title}</h3><p class="text-sm ${textColor}">${text}</p>`;
                notificationArea.appendChild(message);
            }

            form.addEventListener('submit', (event) => {
                event.preventDefault();

                const houseNo = document.getElementById('house_no').value.trim();
                const suggestionText = document.getElementById('suggestion_area').value.trim();

                if (!houseNo || !suggestionText) {
                    showMessage('error', 'Error!', 'Both the house number and suggestion fields are required.');
                    return;
                }

                // 1. Construct the email body text
                const bodyContent = `
House Number: ${houseNo}

Suggestion Details:
====================================
${suggestionText}
====================================

NOTE: This message was generated by the community suggestion form.
`;
                
                // 2. Build the mailto link
                // Use double line breaks (%0D%0A%0D%0A) to ensure readability in the email body
                const mailtoLink = 
                    `mailto:${ADMIN_EMAIL}` +
                    `?subject=${urlEncode(EMAIL_SUBJECT)}` +
                    `&body=${urlEncode(bodyContent)}`;

                // 3. Open the user's email client
                window.location.href = mailtoLink;

                // 4. Show success and prompt the user
                showMessage('success', 'Email Client Opened!', 'Please check your default email program (like Outlook or Gmail) to manually send the prepared message. The form will now reset.');
                
                // 5. Reset the form after a short delay
                setTimeout(() => {
                    form.reset();
                }, 100); 
            });
        });


    </script>
</body>
</html>










